---
slug: fenotes
title: KrossIAM 前端开发说明
authors: krossdev
tags: [kross iam, web, dev]
---

KrossIAM 的控制台前端基于 **React** 技术开发，UI 采用 [chakra ui](https://chakra-ui.com)，
在开发前端时，需要综合考虑一些因素。

<!--truncate-->

## 前端布局

KrossIAM 前端布局有以下几点要求：

* 支持暗色/亮色模式；
* 支持国际化；
* 响应式布局，支持常见的各种屏幕尺寸（手机，平板，PC）；
* 兼容无障碍辅助功能标准（a11y）；

在设计前端页面时，要综合考虑上面的要素，这确实给开发人员带了了不小的挑战。

### 开发提示

* 避免武断使用固定颜色，而应该使用系统主题提供的颜色，因为主题提供的颜色将来可以统一调整，
  但不排除某些特殊的地方采用特殊的颜色代表特殊的含义；
* 避免固定大小的布局，采用弹性布局，因为要支持不同大小的屏幕，另外页面文字可能会翻译成不同语言，
  占用的空间是不一样的；
* 使用浏览器提供的工具和第三方工具对页面进行检查，排除各种可以排除的警告和错误；


### 将来可能的增强

目前 KrossIAM 处于成长阶段，不宜对页面做过多的修饰，等到比较稳定后，需要对颜色做一些调整，
对页面进一步修饰，另外一个可能的增强是动画交互，例如 `framer-motion` 提供了非常棒的动画，
动画要合理使用，不宜多，起到画龙点睛的效果即可，多了就是画蛇添足，让人非常不舒服。

## 状态管理

KrossIAM 前端使用 `Recoil` 管理全局状态，某些需要刷新页面后继续保持的状态使用
`localStorage` 存储，但不推荐使用 localStorage。

## 路由

KrossIAM 是采用 React 开发的单页面应用，使用 `react-router-dom` `v6` 进行路由，
在开发时，需要注意每个页面状态的依赖关系和状态转换关系，尽量让每个页面使用起来是独立的，
可以直接进入（例如直接在地址栏输入URL），而不是必须从某个页面导航进入才行（状态依赖），
这涉及到方方面面，包括 URL 的设计，权衡页面内容和功能，页面之间的关系，等等。

还有就是要控制与服务器的交互次数，在保持前端数据与后端一致的前提下，最少与服务器交互，
这要适当的设计好前端缓冲（全局状态），不能依赖网络请求来保持数据的一致性。
